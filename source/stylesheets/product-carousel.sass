\:root
  --thumbnail-active-color: $links-rollover-color
  --thumb-scroller-color: $primary-text-color
  --thumb-scroller-background: rgba(0,0,0,.1)
  --current-slide-background: rgba(255, 255, 255, 1)
  --current-slide-color: rgba(0,0,0,1)

.product-carousel
  .splide__list
    align-items: flex-start

  .splide__slide
    transition: height .2s ease

    img
      height: auto

  .splide__slide:not(.is-active)
    height: 0

.product-thumbnail-carousel
  margin-top: 12px

  .splide__slide
    border-radius: var(--border-radius)
    opacity: 0.8
    border: none !important
    aspect-ratio: 1 / 1

    img
      border-radius: var(--border-radius)
      border: 2px solid transparent !important

    @media (hover: hover)
      &:hover
        img
          border: 2px solid var(--border-color) !important

    &[aria-current="true"]
      opacity: 1

      img
        border: 2px solid var(--border-color) !important

    img
      width: 100%
      height: 100%
      object-fit: cover

  .splide__list
    scroll-padding-left: 15px
    overflow-x: auto

.product-thumbnail-carousel.splide:not(.is-overflow) .splide__list
  justify-content: center

.product-thumbnail-carousel.splide:not(.is-overflow) .splide__slide:last-child
  margin: 0 !important

.splide__track
  border-radius: var(--border-radius)

.splide__arrow
  opacity: 0 !important
  visibility: hidden !important
  transition: opacity .2s ease

  &--prev
    left: .75em

  &--next
    right: .75em

@media (hover: hover)
  .splide:hover .splide__arrow
    opacity: 1 !important
    visibility: visible !important

.product-thumbnails
  overflow: hidden

  &--inner
    overflow-x: auto
    scroll-snap-type: x mandatory
    scroll-behavior: smooth

    &::-webkit-scrollbar
      display: none

  &--list
    display: flex
    gap: 10px
    align-items: center
    justify-content: center
    position: relative

    &.is-overflow
      justify-content: flex-start

    &.thumbnails
      flex-wrap: wrap

  &--item
    width: calc((100% / 5) - 8px)
    flex-shrink: 0
    cursor: pointer
    border-radius: var(--border-radius)
    overflow: hidden
    user-select: none
    pointer-events: none
    position: relative
    scroll-snap-align: start

    &:before
      content: ""
      display: block
      padding-bottom: 100%

    &:not([aria-current="true"]):hover
      img
        opacity: .8

    &[aria-current="true"]
      button
        border: 2px solid var(--thumbnail-active-color)

    button
      position: absolute
      top: 0
      left: 0
      display: block
      height: 100%
      width: 100%
      padding: 0
      overflow: hidden
      user-select: none
      border-radius: var(--border-radius)
      pointer-events: auto
      border: 2px solid transparent

      img
        height: 100%
        width: 100%
        object-fit: cover

.gallery-link
  display: block

.product-thumbnails-buttons-container
  align-items: center
  display: flex
  gap: 10px
  margin-top: 12px
  width: 100%

  .product-thumbnails
    flex: 1

  .thumb-scroller
    display: none
    align-items: center
    justify-content: center
    width: 26px
    height: 30px
    background: var(--thumb-scroller-background)
    color: var(--thumb-scroller-color)

    &[disabled]
      opacity: .5
      cursor: not-allowed

    svg
      display: block
      width: 20px
      height: 20px

    &--left
      svg
        transform: rotate(90deg)

    &--right
      svg
        transform: rotate(-90deg)

    &.hidden
      opacity: 0
      visibility: hidden

@media screen and (min-width: $break-small + 1)
  .overlay-image-counter
    display: none

  .desktop-stacked, .desktop-two-column
    .splide
      .splide__list
        display: flex !important
        flex-direction: column
        gap: 16px

      .splide__slide
        height: auto
        flex-shrink: 0
        width: 100%

    .product-thumbnails
      display: none

  .desktop-two-column
    .splide
      .splide__list
        flex-direction: row
        flex-wrap: wrap

      .splide__slide
        width: calc((100% / 2) - 8px)

        &:first-child
          width: 100%

  .desktop-carousel

    .thumb-scroller
      display: flex

    .overlay-image-counter
      display: flex

  .desktop-thumbnails
    .product-thumbnails
      &--list
        display: grid
        grid-template-columns: repeat(5, 1fr)

      &--item
        width: 100%

  .mobile-buttons-indicator
    display: none

@media screen and (max-width: $break-small)
  .mobile-show-thumbnails
    .mobile-buttons-indicator
      display: none

    .thumb-scroller
      display: flex

  .mobile-hide-thumbnails
    .overlay-image-counter
      display: none

    .product-thumbnails-buttons-container
      display: none

    .mobile-buttons-indicator
      display: flex
      font-size: .925em
      gap: 24px
      align-items: center
      justify-content: center
      margin-top: 16px

      button
        display: flex
        align-items: center
        justify-content: center
        padding: 0
        width: 30px
        height: 30px
        background: var(--thumb-scroller-background)
        color: var(--thumb-scroller-color)

.overlay-image-counter
  position: absolute
  right: 12px
  top: 12px
  z-index: 1000
  background: var(--current-slide-background)
  color: var(--current-slide-color)
  padding: 4px
  border-radius: var(--border-radius)